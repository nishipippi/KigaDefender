承知いたしました。
『バイオセル・ディフェンス・ローグ』開発プロジェクトの成功に向け、タスクを段階的に分割した詳細なマイルストーンを提案します。このマイルストーンは、まず「遊べる核」を早期に作り、そこから肉付けしていくアジャイル的なアプローチを想定しています。

---

## 開発マイルストーン：『バイオセル・ディフェンス・ローグ』

### 概要
本マイルストーンは、プロジェクトを6つの主要なフェーズに分割し、各フェーズで達成すべき明確な目標を設定します。これにより、開発の進捗を可視化し、リスクを早期に発見・対応することを目指します。
※各マイルストーンの期間はプロジェクトのチーム規模やリソースに応じて変動します。ここでは小規模チームを想定した目安期間を記載します。

---

### M1: コアメカニクス・プロトタイプ開発
- **目標**: ゲームの最も基本的な「楽しい」部分を検証する。「ユニットを配置し、敵を倒す」というコア・ループを実装し、ゲームとして成立するかを判断できる状態にする。
- **想定期間**: 1ヶ月

| タスクID | タスク内容 | 完了条件 |
| :--- | :--- | :--- |
| **1-1** | **基本環境構築** <br> - ゲームエンジン上でプロジェクトをセットアップし、バージョン管理を開始する。 <br><br> **達成した要素・要点:** <br> - Next.js (v14.2.3), TypeScript, Tailwind CSS を使用したプロジェクト `biocell-defense-rogue` を作成。 <br> - `src` ディレクトリ、App Router を採用。 <br> - Gitによるバージョン管理を開始し、初期コミットを実施。 | プロジェクトが作成され、Git管理下にある。 | **完了** |
| **1-2** | **盤面とユニット配置** <br> - グリッド状の盤面を作成し、仮のユニット（例: 四角形）を配置できる。 <br><br> **達成した要素・要点:** <br> - 12列x20行のグリッド盤面コンポーネント (`GameBoard.tsx`) を作成。 <br> - セルクリックにより、仮のユニット（青い四角形）を配置/削除する機能を実装。 <br> - ユニットとセルの型定義 (`types.ts`) を作成。 <br> - メインページ (`page.tsx`) に盤面を表示。 | ブラウザ上で盤面が表示され、ユニットの配置・削除が可能。 | **完了** |
| **1-3** | **敵のAIと侵攻** <br> - 仮の敵（例: 円）が画面上部から出現し、画面下部のゴールを目指して移動する。 <br><br> **達成した要素・要点:** <br> - `src/lib/types.ts` に `Enemy` 型を定義。 <br> - `biocell-defense-rogue/src/app/components/GameBoard.tsx` に敵の状態管理 (`enemies` state)、出現ロジック (`spawnEnemy` 関数)、移動ロジック (`useEffect` と `requestAnimationFrame` を使用)、描画ロジックを実装。 <br> - 敵は盤面の上部から横軸ランダムな位置に出現し、画面下端に向かってスムーズに移動する。 <br> - テスト用に「敵を出現させる」ボタンを実装し、動作を確認済み。 | 仮の敵（例: 円）が画面上部から出現し、画面下部のゴールを目指して移動する。 | **完了** |
| **1-4** | **戦闘システム** | ユニットが範囲内の敵を自動で索敵し、攻撃（例: 弾を発射）する。敵はHPが0になると消滅する。 | **完了** |
| **1-5** | **勝利・敗北条件** | ラスト・サンプルのHPが実装され、敵に到達されるとHPが減少。HPが0でゲームオーバーとなる。ウェーブの敵を全滅させるとクリア。 | **完了** |
| **1-6** | **ウェーブ管理** | 時間経過またはボタン押下で次のウェーブが開始されるシステムを実装する。 | **完了** |
| **M1完了条件** | **グラフィックやUIは仮のもので良いが、一連のゲームプレイ（配置→戦闘→クリア/敗北）が可能な、操作できるビルドが完成していること。** | **完了** |

**追加の達成要素・要点:**
- **マップの縦横比修正**: 盤面サイズを12列x20行の縦長に変更し、関連するCSSも調整しました。
- **戦闘システムの改善**: ユニットの索敵、攻撃、弾丸の移動、敵のHP管理、消滅ロジックを実装しました。
- **勝利・敗北条件の実装**: ラスト・サンプルのHP管理、敵のゴール到達によるHP減少、ゲームオーバー判定を実装しました。
- **ウェーブ管理の改善**: ウェーブ開始ボタン、ウェーブ数表示、ウェーブに応じた敵の出現調整、およびウェーブクリア判定を実装しました。

**苦労した点:**
- **ゲームループとStateの同期**: `requestAnimationFrame`を使用したゲームループ内で、Reactのstate（特に`enemies`や`isWaveActive`）の更新が非同期であることによる競合状態の解決に苦労しました。特に、敵のスポーンとウェーブアクティブ状態の切り替え、およびウェーブクリア判定のタイミングの調整が複雑でした。
- **マップの縦横比変更**: 既存のコードベースが横長を前提としていたため、`BOARD_WIDTH`と`BOARD_HEIGHT`の入れ替えだけでなく、CSSの調整や敵の初期位置計算など、複数の箇所で修正が必要でした。

---

### M2: ゲームサイクルの確立
- **目標**: M1のプロトタイプにリソース管理とローグライクな成長要素を追加し、「一回りのプレイ」が面白くなるようにする。
- **想定期間**: 1.5ヶ月

| タスクID | タスク内容 | 完了条件 |
| :--- | :--- | :--- |
| **2-1** | **リソースシステム** | 「培養液」と「研究レベル(XP)」を実装。敵撃破やウェーブクリアで獲得できるようにする。 | **完了** |
| **2-2** | **ユニットショップ** | 培養液を消費してユニットを購入/リロールできる基本的なショップUIを実装する。 | **完了** |
| **2-3** | **マージ進化** | 同じユニットを重ねることでユニットが進化（レベルアップ）する機能を実装する。 | **完了** |
| **2-4** | **突然変異システム** | 特定ウェーブクリア後、3択のパッシブ強化（数種類で可）を選択し、その効果がゲームプレイに反映される。 | **完了** |
| **2-5** | **ゲームフロー実装** | ゲームオーバー画面（リザルト表示）と、そこからリトライできる機能を実装する。 | **完了** |
| **M2完了条件** | **「ショップでの購入→配置・進化→戦闘→強化選択」という一連のゲームサイクルが確立され、繰り返し遊ぶ楽しさの土台が確認できること。** | **完了** |

**追加の達成要素・要点:**
- **リソースシステムの導入**: `PlayerResources` 型を定義し、敵撃破時に「培養液」と「XP」を獲得するロジックを実装しました。XPが一定値に達するとレベルアップします。
- **ユニットショップの実装**: ユニットを購入・リロールできる `Shop.tsx` コンポーネントを作成し、`GameBoard.tsx` に統合しました。購入したユニットは盤面に配置できます。
- **マージ進化の実装**: 同じ種類・レベルのユニットを重ねることで、ユニットがレベルアップしステータスが向上する基本的なマージ機能を実装しました。
- **突然変異システムの実装**: 特定のウェーブクリア後に3択のパッシブ強化（突然変異）を選択できる `MutationSelection.tsx` コンポーネントを作成し、選択した効果がゲームプレイに反映されるようにしました。
- **ゲームフローの実装**: ゲームオーバー時にリザルトを表示し、リトライできる `GameOverScreen.tsx` コンポーネントを実装しました。
- **UIの改善**: 突然変異選択画面でテキストが見切れる問題を、CSSを修正することで解決しました。

**苦労した点:**
- **状態管理の複雑化**: リソース、ショップ、選択中のユニット、突然変異など、管理すべき状態が増えたことで、`GameBoard.tsx` のロジックが複雑化しました。特に、各状態の更新とコンポーネント間の連携に注意が必要でした。
- **TypeScriptの型エラー**: 機能追加に伴い、`types.ts` の型定義を頻繁に更新する必要がありました。`cost` や `level` などのプロパティを追加した際に、関連するすべてのコンポーネントで型エラーが発生し、その都度修正が必要でした。
- **コマンド実行時のパスの問題**: `npm run dev` を実行する際に、プロジェクトのルートディレクトリに移動する必要がありましたが、当初は作業ディレクトリで実行してしまいエラーが発生しました。

---

### M3: 戦略性の深化（α版）
- **目標**: ゲームの戦略的な幅を広げる主要なコンテンツを追加し、内部テストが可能なα版を完成させる。
- **想定期間**: 2ヶ月

| タスクID | タスク内容 | 完了条件 |
| :--- | :--- | :--- |
| **3-1** | **シナジーシステム** | 特定のユニット系統を揃えることでシナジーが発動するシステムを実装する。 |
| **3-2** | **コンテンツ拡充 (ユニット/敵)** | ユニットと敵の種類を増やす（各10種類程度）。それぞれにユニークな能力を持たせる。 |
| **3-3** | **進化分岐** | ユニットの進化時に、2つの異なる強化パスから1つを選択できる機能を実装する。 |
| **3-4** | **特殊ウェーブ** | 定期的に出現する「ボスウェーブ」と、ランダム発生の「ボーナスウェーブ」を実装する。 |
| **3-5** | **緊急プロトコル** | プレイヤーが戦闘中に介入できるアクティブスキル（1〜2種類）を実装する。 |
| **M3完了条件** | **多様な戦略（ビルド）を試すことができ、ゲームの奥深さが感じられる状態。αテスターがプレイし、フィードバックを得られるビルドが完成していること。** |

---

### M4: 製品化に向けた基盤整備（β版）
- **目標**: 長期的なプレイを促すメタ要素と、製品版に近いUI/UXを実装し、外部テストが可能なβ版を完成させる。
- **想定期間**: 1.5ヶ月

| タスクID | タスク内容 | 完了条件 |
| :--- | :--- | :--- |
| **4-1** | **メタプログレッション** | 「研究ポイント」と「研究所」画面を実装。恒久的なアップグレード機能を実装する。 |
| **4-2** | **盤面ギミック** | 盤面にランダムで特殊な効果を持つ「培養シャーレ」マスが生成される機能を実装する。 |
| **4-3** | **UI/UX正式実装** | 全ての画面（タイトル、メインメニュー、設定等）を正式なデザインで実装し、操作性を向上させる。 |
| **4-4** | **アート/サウンド実装** | ユニット、敵、背景などの主要なグラフィックアセットを実装。基本的なSEとBGMを導入する。 |
| **M4完了条件** | **ゲームの全機能が一通り実装され、製品としての全体像が見える状態。広範囲のテスターに配布可能なβ版が完成していること。** |

---

### M5: バランス調整とポリッシュ
- **目標**: βテストのフィードバックを基に、ゲームバランスを徹底的に調整し、製品としての品質を最大限に高める。
- **想定期間**: 2ヶ月

| タスクID | タスク内容 | 完了条件 |
| :--- | :--- | :--- |
| **5-1** | **ゲームバランス調整** | ユニット、敵、シナジー、コストなど、全ての数値データを調整し、適切な難易度曲線を描くようにする。 |
| **5-2** | **バグ修正** | βテストで報告されたバグを徹底的に修正する。 |
| **5-3** | **ビジュアル/サウンド強化** | エフェクト、アニメーション、サウンドをブラッシュアップし、リッチなゲーム体験を演出する。 |
| **5-4** | **チュートリアル実装** | 新規プレイヤーがスムーズにゲームを理解できるよう、操作方法や基本戦略を教えるチュートリアルを実装する。 |
| **M5完了条件** | **バグがほとんどなく、誰がプレイしても理不尽さを感じない、快適で没入感のあるゲーム体験が提供できる状態。** |

---

### M6: リリース準備とローンチ
- **目標**: 各プラットフォームでのリリースに向けた最終準備を行い、市場に製品を投入する。
- **想定期間**: 1ヶ月

| タスクID | タスク内容 | 完了条件 |
| :--- | :--- | :--- |
| **6-1** | **プラットフォーム対応** | 各プラットフォーム（Steam, iOS, Android）の要件に合わせてビルドを作成し、実績や課金（もしあれば）などのAPIを連携する。 |
| **6-2** | **ストアページ準備** | 各ストアページのテキスト、スクリーンショット、プロモーションビデオを作成し、申請準備を整える。 |
| **6-3** | **最終テスト** | リリース候補版（Release Candidate）を用いて、致命的な不具合がないか最終確認を行う。 |
| **6-4** | **ローンチ** | 各プラットフォームの審査を通過し、設定したリリース日に製品を公開する。 |
| **M6完了条件** | **ゲームがストアで公開され、ユーザーがダウンロードしてプレイできる状態になっていること。** |
